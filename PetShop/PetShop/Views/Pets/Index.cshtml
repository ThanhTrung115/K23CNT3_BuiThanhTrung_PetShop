@model IEnumerable<PetShop.Models.Pet>
@{
    ViewData["Title"] = ViewData["PageTitle"]?.ToString();
    var categories = ViewData["Categories"] as List<PetCategory>;
    var selectedCategoryId = ViewData["SelectedCategoryId"] as int?;
}

<div class="container">
    <div class="text-center mb-4">
        <h1 class="display-4">@ViewData["PageTitle"]</h1>
    </div>

    <nav class="category-filter-nav mb-5">
        <ul class="list-unstyled d-flex justify-content-center flex-wrap">
            @{
                string allActiveClass = !selectedCategoryId.HasValue ? "active" : "";
            }
            <li><a asp-action="Index" class="@allActiveClass">Tất cả</a></li>

            @if (categories != null)
            {
                @foreach (var category in categories)
                {
                    string activeClass = (category.CategoryId == selectedCategoryId) ? "active" : "";
                    <li>
                        <a asp-action="Index" asp-route-categoryId="@category.CategoryId" class="@activeClass">
                            @category.CategoryName
                        </a>
                    </li>
                }
            }
        </ul>
    </nav>

    <div class="row">
        @foreach (var pet in Model)
        {
            <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                <div class="card h-100 product-card">
                    <div class="card-image-container">
                        <img src="https://picsum.photos/seed/@pet.PetId/400/300" class="card-img-top" alt="@pet.PetName">
                        <a asp-action="Details" asp-route-id="@pet.PetId" class="btn btn-light details-button">Xem chi tiết</a>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">@pet.PetName</h5>
                        <p class="card-category text-muted">@pet.Category?.CategoryName</p>
                        <p class="card-price">@pet.Price.ToString("N0") VNĐ</p>
                        <a href="#" class="btn btn-success w-100 mt-2">Mua ngay</a>
                    </div>
                </div>
            </div>
        }
    </div>
</div>